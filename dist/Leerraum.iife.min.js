var Leerraum=function(t){"use strict";function L(){this.head=null,this.tail=null,this.listSize=0}(L.Node=function(t){this.prev=null,this.next=null,this.data=t}).prototype.toString=function(){return this.data.toString()},L.prototype.isLinked=function(t){return!(t&&null===t.prev&&null===t.next&&this.tail!==t&&this.head!==t||this.isEmpty())},L.prototype.size=function(){return this.listSize},L.prototype.isEmpty=function(){return 0===this.listSize},L.prototype.first=function(){return this.head},L.prototype.last=function(){return this.last},L.prototype.toString=function(){return this.toArray().toString()},L.prototype.toArray=function(){for(var t=this.head,e=[];null!==t;)e.push(t),t=t.next;return e},L.prototype.forEach=function(t){for(var e=this.head;null!==e;)t(e),e=e.next},L.prototype.contains=function(t){var e=this.head;if(!this.isLinked(t))return!1;for(;null!==e;){if(e===t)return!0;e=e.next}return!1},L.prototype.at=function(t){var e=this.head,n=0;if(t>=this.listLength||t<0)return null;for(;null!==e;){if(t===n)return e;e=e.next,n+=1}return null},L.prototype.insertAfter=function(t,e){return this.isLinked(t)&&(e.prev=t,e.next=t.next,null===t.next?this.tail=e:t.next.prev=e,t.next=e,this.listSize+=1),this},L.prototype.insertBefore=function(t,e){return this.isLinked(t)&&(e.prev=t.prev,null===(e.next=t).prev?this.head=e:t.prev.next=e,t.prev=e,this.listSize+=1),this},L.prototype.push=function(t){return null===this.head?this.unshift(t):this.insertAfter(this.tail,t),this},L.prototype.unshift=function(t){return null===this.head?(this.head=t,(this.tail=t).prev=null,t.next=null,this.listSize+=1):this.insertBefore(this.head,t),this},L.prototype.remove=function(t){return this.isLinked(t)&&(null===t.prev?this.head=t.next:t.prev.next=t.next,null===t.next?this.tail=t.prev:t.next.prev=t.prev,this.listSize-=1),this},L.prototype.pop=function(){var t=this.tail;return this.tail.prev.next=null,this.tail=this.tail.prev,this.listSize-=1,t.prev=null,t.next=null,t},L.prototype.shift=function(){var t=this.head;return this.head.next.prev=null,this.head=this.head.next,this.listSize-=1,t.prev=null,t.next=null,t};var F=function(M,t,e){var S={line:e&&e.demerits&&e.demerits.line||10,flagged:e&&e.demerits&&e.demerits.flagged||100,fitness:e&&e.demerits&&e.demerits.fitness||3e3},b=e&&e.tolerance||2,A=new L,C={width:0,stretch:0,shrink:0},z=t,n=[],i={data:{demerits:1/0}};function E(t,e,n,i,h,r,l){return{position:t,demerits:e,ratio:n,line:i,fitnessClass:h,totals:r||{width:0,stretch:0,shrink:0},previous:l}}function B(t){var e={width:C.width,stretch:C.stretch,shrink:C.shrink},n=0;for(n=t;n<M.length;n+=1)if("glue"===M[n].type)e.width+=M[n].width,e.stretch+=M[n].stretch,e.shrink+=M[n].shrink;else if("box"===M[n].type||"penalty"===M[n].type&&M[n].penalty===-F.infinity&&t<n)break;return e}function h(t,e,n){for(var i,h,r,l,a,o,u,s,f,p,d,g,y=A.first(),c=null,v=0,w=0,x=[],m=0,k=0;null!==y;){for(x=[{demerits:1/0},{demerits:1/0},{demerits:1/0},{demerits:1/0}];null!==y;){if(c=y.next,m=y.data.line+1,y.data.position,o=e,u=y.data,s=m,d=p=f=void 0,f=C.width-u.totals.width,d=p=0,null===(v=null===(g=z(s-1))?null:("penalty"===M[o].type&&(f+=M[o].width),f<g?0<(p=C.stretch-u.totals.stretch)?(g-f)/p:F.infinity:g<f?0<(d=C.shrink-u.totals.shrink)?(g-f)/d:F.infinity:0))){y=null;break}if((v<-1||"penalty"===t.type&&t.penalty===-F.infinity)&&A.remove(y),-1<=v&&v<=b&&(i=100*Math.pow(Math.abs(v),3),w="penalty"===t.type&&0<=t.penalty?Math.pow(S.line+i,2)+Math.pow(t.penalty,2):"penalty"===t.type&&t.penalty!==-F.infinity?Math.pow(S.line+i,2)-Math.pow(t.penalty,2):Math.pow(S.line+i,2),"penalty"===t.type&&"penalty"===n[y.data.position].type&&(w+=S.flagged*t.flagged*n[y.data.position].flagged),k=v<-.5?0:v<=.5?1:v<=1?2:3,1<Math.abs(k-y.data.fitnessClass)&&(w+=S.fitness),(w+=y.data.demerits)<x[k].demerits&&(x[k]={active:y,demerits:w,ratio:v})),null!==(y=c)&&y.data.line>=m)break}for(h=B(e),r=0;r<x.length;r+=1)(l=x[r]).demerits<1/0&&(a=new L.Node(E(e,l.demerits,l.ratio,l.active.data.line+1,r,h,l.active)),null!==y?A.insertBefore(y,a):A.push(a))}}if(A.push(new L.Node(E(0,0,0,0,0,void 0,null))),M.forEach(function(t,e,n){"box"===t.type?C.width+=t.width:"glue"===t.type?(0<e&&"box"===n[e-1].type&&h(t,e,n),C.width+=t.width,C.stretch+=t.stretch,C.shrink+=t.shrink):"penalty"===t.type&&t.penalty!==F.infinity&&h(t,e,n)}),0===A.size())return[];for(A.forEach(function(t){t.data.demerits<i.data.demerits&&(i=t)});null!==i;)n.push({position:i.data.position,ratio:i.data.ratio}),i=i.data.previous;return n.reverse()};function y(e,n){return function(t){return 0==t?e:n(t-1)}}function c(e,n){return function(t){return n(t+e)}}function E(n){return function(e){return function(t){return n(e(t))}}}function B(t,e){return!(t.x+t.width<e.x||t.y+t.height<e.y||e.x+e.width<t.x||e.y+e.height<t.y)}function v(f,p,t,n){var d=[];return t.forEach(function(h,r,l){var t=h.text.split(/\s/),a=f(h.fontFamily,h.fontSize," "),e={width:n&&n.space.width||3,stretch:n&&n.space.stretch||6,shrink:n&&n.space.shrink||9},o=f(h.fontFamily,h.fontSize,"-"),u=a*e.width/e.stretch,s=a*e.width/e.shrink;t.forEach(function(t,e,n){var i=h.hyphenate?p.hyphenate(t):[t];1<i.length&&4<t.length?i.forEach(function(t,e,n){d.push({style:h,value:F.box(f(h.fontFamily,h.fontSize,t),t)}),e!==n.length-1&&d.push({style:h,value:F.penalty(o,100,1)})}):d.push({style:h,value:F.box(f(h.fontFamily,h.fontSize,t),t)}),r===l.length-1&&e===n.length-1?(d.push({style:h,value:F.glue(0,F.infinity,0)}),d.push({style:h,value:F.penalty(0,-F.infinity,1)})):e!==n.length-1&&d.push({style:h,value:F.glue(a,u,s)})})}),d}function w(u,s,t,e){var f=[];return t.forEach(function(h,r,l){var t=h.text.split(/\s/),a=u(h.fontFamily,h.fontSize," "),o=(e&&e.space.width,e&&e.space.stretch,e&&e.space.shrink,u(h.fontFamily,h.fontSize,"-"));t.forEach(function(t,e,n){var i=h.hyphenate?s.hyphenate(t):[t];1<i.length&&4<t.length?i.forEach(function(t,e,n){f.push({style:h,value:F.box(u(h.fontFamily,h.fontSize,t),t)}),e!==n.length-1&&f.push({style:h,value:F.penalty(o,100,1)})}):f.push({style:h,value:F.box(u(h.fontFamily,h.fontSize,t),t)}),r===l.length-1&&e===n.length-1?(f.push({style:h,value:F.glue(0,F.infinity,0)}),f.push({style:h,value:F.penalty(0,-F.infinity,1)})):e!==n.length-1&&(f.push({style:h,value:F.glue(0,12,0)}),f.push({style:h,value:F.penalty(0,0,0)}),f.push({style:h,value:F.glue(a,-12,0)}))})}),f}function x(u,s,t,e){var f=[];return 0<t.length&&(f.push({style:t[0],value:F.box(0,"")}),f.push({style:t[0],value:F.glue(0,12,0)})),t.forEach(function(h,r,l){var t=h.text.split(/\s/),a=u(h.fontFamily,h.fontSize," "),o=(e&&e.space.width,e&&e.space.stretch,e&&e.space.shrink,u(h.fontFamily,h.fontSize,"-"));t.forEach(function(t,e,n){var i=s.hyphenate(t);1<i.length&&4<t.length?i.forEach(function(t,e,n){f.push({style:h,value:F.box(u(h.fontFamily,h.fontSize,t),t)}),e!==n.length-1&&f.push({style:h,value:F.penalty(o,100,1)})}):f.push({style:h,value:F.box(u(h.fontFamily,h.fontSize,t),t)}),r===l.length-1&&e===n.length-1?(f.push({style:h,value:F.glue(0,12,0)}),f.push({style:h,value:F.penalty(0,-F.infinity,0)})):e!==n.length-1&&(f.push({style:h,value:F.glue(0,12,0)}),f.push({style:h,value:F.penalty(0,0,0)}),f.push({style:h,value:F.glue(a,-24,0)}),f.push({style:h,value:F.box(0,"")}),f.push({style:h,value:F.penalty(0,F.infinity,0)}),f.push({style:h,value:F.glue(0,12,0)}))})}),f}F.infinity=1e4,F.glue=function(t,e,n){return{type:"glue",width:t,stretch:e,shrink:n}},F.box=function(t,e){return{type:"box",width:t,value:e}},F.penalty=function(t,e,n){return{type:"penalty",width:t,penalty:e,flagged:n}};function r(t,e,n,i){for(var h=[],r=0,l=t.length,a=e(0),o=0;o<l;o++){var u=t[o].length,s=u*n;if(a-n<r+i)r=s+i,h.push([o,0,r,r]),a=e(h.length);else if(a<r+s){var f=Math.floor((a-r)/n),p=u-f;r=p?p*n+i:0,h.push([o,f,r,f*n+r]),a=e(h.length)}else r+=s+i}return h}function l(t,e,n,i,h){for(var r,l,a,o=e.length+1,u=[],s=0;n<o;){for(l=[],r=0;r<n;r++){a=[];for(var f=e.shift();s<f[0];)a.push(t[s]),s++;var p=t[s];f[1]>=p.length?(a.push(p),s++):0<f[1]&&a.push(p.splice(0,f[1])),l.push(a)}u.push(l),o-=n}var d=0;for(r=s;r<t.length;r++)d+=t[r].length*i+h;var g=d/n,y=0,c=t.length-s;for(a=[],l=[];c;){var v=t[s],w=v.length,x=Math.round((g-y)/i);l.length+1>=n||w<=x?(a.push(v),s++,c--,y+=w*i+h):(0<x&&a.push(v.splice(0,x)),l.push(a),a=[],y=0)}return l.push(a),u.push(l),u}var e=Object.freeze({__proto__:null,getCutsHeight:r,colsEqualizeLastPage:l,paragraphsToPageColumns:function(t,n,i,e,h){return l(t,r(t,function(t){var e=Math.floor(t/i);return n(e,t)},e,h),i,e,h)}});function u(z){return function(t,e){for(var n=[],i=[],h=[],r=0,l=z;r<l.length;r++){var a=l[r],o=a[0],u=(0,a[1])(t,E(o)(e)),s=u[0],f=u[1];i=i.concat(s),h=h.concat(f)}for(var p={},d=0,g=i;d<g.length;d++)for(var y=g[d],c=0,v=void 0,w=!1;v=e(c);){if(B(y,v))void 0===p[c]&&(p[c]=[]),p[c].push(y),w=!0;else if(w)break;c++}for(var x,m,k,M,S=0,b=Object.keys(p).sort();S<b.length;S++){var A=p[b[S]],C=A[0];for(c=1;c<A.length;c++)x=C,m=A[c],void 0,k=Math.min(x.x,m.x),M=Math.min(x.y,m.y),C={x:k,y:M,width:Math.max(x.x+x.width,m.x+m.width)-k,height:Math.max(x.y+x.height,m.y+m.height)-M};n.push(C)}return[n,h]}}function n(g){return function(t,e){for(var n=[],i=e,h=[],r=0,l=g;r<l.length;r++){var a=(0,l[r])(t,i),o=a[0],u=a[1];if(0<o.length){for(var s=null,f=o[o.length-1],p=0;null!==(s=i(p))&&!B(s,f);)p++;if(null!=s){var d={x:s.x,y:f.y+f.height,width:s.width,height:s.y+s.height-(f.y+f.height)};i=0<d.height?y(d,c(p+1,i)):c(p+1,i)}}h=h.concat(o),n=n.concat(u)}return[h,n]}}function m(t,i,h){var e;switch(i.align){case"left":default:e=w;break;case"center":e=x;break;case"justify":e=v}for(var n,r,l=e(t.measure,i.hypher,i.spans,null),a=F(l.map(function(t){return t.value}),(n=function(t){var e=(t+1)*i.leading,n=0;return n+=i.leftIndentation?i.leftIndentation(t):0,n+=i.rightIndentation?i.rightIndentation(t):0,h(e,t)-n},r={},function(t){return void 0!==r[t]||(r[t]=n(t)),r[t]}),{tolerance:i.tolerance||10}),o=[],u=0,s=1;s<a.length;s+=1){for(var f=a[s].position,p=a[s].ratio,d=u;d<l.length;d+=1){var g=l[d].value;if("box"===g.type||"penalty"===g.type&&g.penalty===-F.infinity){u=d;break}}o.push({ratio:p,nodes:l.slice(u,f+1),position:f}),u=f}return o}function k(a,o,u,s){void 0===u&&(u=0),void 0===s&&(s=0);var f=[],p=0,d=0;return o.nodes.forEach(function(t,e,n){var i=-a.fontMetrics(t.style.fontFamily).ascender/1e3*t.style.fontSize,h=u+p,r=s+0;if("box"===t.value.type){if(0===h){var l=t.value.value[0]?a.glyphMetrics(t.style.fontFamily,t.value.value[0]).leftBearing:0;d=-l/1e3*t.style.fontSize}f.push({type:"text",x:h+d,y:r+i,span:t.style,text:t.value.value}),p+=t.value.width}else"glue"===t.value.type?p+=t.value.width+o.ratio*(o.ratio<0?t.value.shrink:t.value.stretch):"penalty"===t.value.type&&100===t.value.penalty&&e===n.length-1&&f.push({type:"text",x:h+d,y:r+i,span:t.style,text:"-"})}),f}function i(c){return function(o,r){function u(t,e){for(var n=0,i=0,h=null;null!==(h=r(i));){if(e-n<h.height)return[h,i];n+=Math.floor(h.height/t)*t,i++}return[null,i]}var s,f,p=[],d=0,g=0,y=null,t=[];m(o,c,function(t){var e=u(c.leading,t),n=e[0];e[1];return null!==n?n.width:NaN}).forEach(function(t,e){var n,i,h,r,l=c.leftIndentation?c.leftIndentation(e):0;g+=c.leading,d+=c.leading,n=u(c.leading,d),s=n[0],f=n[1],null===y||(h=y,r=.001,(i=s).x>=h.x-r&&i.x<=h.x+r&&i.y>=h.y-r&&i.y<=h.y+r&&i.width>=h.width-r&&i.width<=h.width+r&&i.height>=h.height-r&&i.height<=h.height+r)||(g=c.leading);var a=k(o,t,(y=s).x+l,s.y+g);p=p.concat(a)});for(var e=0;e<f;e++)t.push(r(e));return null!=s&&t.push({x:s.x,y:s.y,width:s.width,height:Math.min(s.height,g+(c.paragraphLeading||0))}),[t,p]}}function h(t,e){for(var n=[],i=0,h=0,r=e;h<r.length;h++){var l=r[h],a=l[0],o=l[1];n.push([[i,a],o]),i+=a+t}return u(n.map(function(t){var e,n,i,h=t[0],r=t[1];return[(e=h,n=e[0],i=e[1],function(t){return{x:t.x+n,y:t.y,width:i,height:t.height}}),r]}))}function s(i){return{measure:function(t,e,n){return i.font(t)._font.widthOfString(n,e)},fontMetrics:function(t){return{ascender:i.font(t)._font.ascender}},glyphMetrics:function(t,e){return{leftBearing:i.font(t)._font.font.layout(e).glyphs[0]._metrics.leftBearing}}}}function M(t,e){void 0!==e.lineWidth&&t.lineWidth(e.lineWidth),void 0!==e.strokeColor&&t.strokeColor(e.strokeColor),void 0!==e.fillColor&&t.fillColor(e.fillColor),void 0!==e.strokeOpacity&&t.strokeOpacity(e.fillColor),void 0!==e.fillOpacity&&t.fillOpacity(e.fillColor),void 0!==e.lineJoin&&t.lineJoin(e.lineJoin),void 0!==e.lineCap&&t.lineCap(e.lineCap)}function f(t,e,n,i){for(var h=0,r=0,l=n;r<l.length;r++)for(var a=0,o=l[r];a<o.length;a++){var u=o[a],s=Math.floor(u.y/e.height);h=Math.max(h,s)}var f=Array(h+1).fill([]);if(i)for(s=0;s<=h;s++)for(var p=0,d=i(s);p<d.length;p++)for(var g=0,y=d[p];g<y.length;g++){u=y[g];f[s].push(u)}for(var c=0,v=n;c<v.length;c++)for(var w=0,x=v[c];w<x.length;w++){u=x[w];f[s=Math.floor(u.y/e.height)].push(u)}for(s=0;s<=h;s++){0!=s&&t.addPage();for(var m=0,k=f[s];m<k.length;m++){u=k[m];switch(t.save(),u.type){case"text":t.save(),M(t,u.span.style||{}),t.font(u.span.fontFamily).fontSize(u.span.fontSize)._fragment(u.text,u.x,u.y-s*e.height,u.span.options||{}),t.restore();break;case"polygon":t.save(),M(t,u.style||{}),u.style.fillColor&&u.style.strokeColor?(t.polygon.apply(t,u.points.map(function(t){return[t.x,t.y]})),t.fillAndStroke()):u.style.fillColor?(t.polygon.apply(t,u.points.map(function(t){return[t.x,t.y]})),t.fill()):u.style.strokeColor&&(t.polygon.apply(t,u.points.map(function(t){return[t.x,t.y]})),t.stroke()),t.restore()}}}}return t.columns=e,t.columnsWithMargins=function(e,n,i,h,r,l){return function(t){return t%2==0?{tag:"new_page",x:l,y:Math.floor(t/2)*e.height+i,width:e.width/2-n/2-l,height:e.height-(i+r)}:{x:n/2+e.width/2,y:Math.floor(t/2)*e.height+i,width:e.width/2-n/2-h,height:e.height-(i+r)}}},t.combine=u,t.formats={"4A0":{width:4767.87,height:6740.79},"2A0":{width:3370.39,height:4767.87},A0:{width:2383.94,height:3370.39},A1:{width:1683.78,height:2383.94},A2:{width:1190.55,height:1683.78},A3:{width:841.89,height:1190.55},A4:{width:595.28,height:841.89},A5:{width:419.53,height:595.28},A6:{width:297.64,height:419.53},A7:{width:209.76,height:297.64},A8:{width:147.4,height:209.76},A9:{width:104.88,height:147.4},A10:{width:73.7,height:104.88},B0:{width:2834.65,height:4008.19},B1:{width:2004.09,height:2834.65},B2:{width:1417.32,height:2004.09},B3:{width:1000.63,height:1417.32},B4:{width:708.66,height:1000.63},B5:{width:498.9,height:708.66},B6:{width:354.33,height:498.9},B7:{width:249.45,height:354.33},B8:{width:175.75,height:249.45},B9:{width:124.72,height:175.75},B10:{width:87.87,height:124.72},C0:{width:2599.37,height:3676.54},C1:{width:1836.85,height:2599.37},C2:{width:1298.27,height:1836.85},C3:{width:918.43,height:1298.27},C4:{width:649.13,height:918.43},C5:{width:459.21,height:649.13},C6:{width:323.15,height:459.21},C7:{width:229.61,height:323.15},C8:{width:161.57,height:229.61},C9:{width:113.39,height:161.57},C10:{width:79.37,height:113.39},RA0:{width:2437.8,height:3458.27},RA1:{width:1729.13,height:2437.8},RA2:{width:1218.9,height:1729.13},RA3:{width:864.57,height:1218.9},RA4:{width:609.45,height:864.57},SRA0:{width:2551.18,height:3628.35},SRA1:{width:1814.17,height:2551.18},SRA2:{width:1275.59,height:1814.17},SRA3:{width:907.09,height:1275.59},SRA4:{width:637.8,height:907.09},EXECUTIVE:{width:521.86,height:756},FOLIO:{width:612,height:936},LEGAL:{width:612,height:1008},LETTER:{width:612,height:792},TABLOID:{width:792,height:1224}},t.idRenderer=function(t,e){return[[],[]]},t.jsPdfDocMeasures=function(h){return{measure:function(t,e,n){var i=String(t).split("\t");return h.setFont(i[0],i[1]).getStringUnitWidth(n)*e},fontMetrics:function(t){return{ascender:0}},glyphMetrics:function(t,e){return{leftBearing:0}}}},t.landscape=function(t){return{width:t.height,height:t.width}},t.nodesLineToTextNodes=k,t.pageBreak=function(t,e){for(var n=0,i=[];"new_page"!==e(n).tag;)i.push(e(n)),n++;return[i,[]]},t.paragraphToNodesLines=m,t.paragraphsToTextNodes=function(t,e,n){for(var i=[],h=e.length,r=0;r<h;r++){for(var l=m(t,e[r],n),a=[],o=l.length,u=0;u<o;u++){for(var s=k(t,l[u]),f=[],p=s.length,d=0;d<p;d++){var g=s[d];if("text"===g.type){var y=g.text;/^\s*$/.test(y)||f.push(g)}}a.push(f)}i.push(a)}return i},t.pdfKitDocMeasures=s,t.renderColumns=h,t.renderParagraph=i,t.renderPolygon=function(h,r){return function(t,e){var n=e(0),i=function(t){for(var e=Number.MIN_VALUE,n=Number.MIN_VALUE,i=Number.MAX_VALUE,h=Number.MAX_VALUE,r=0,l=t;r<l.length;r++){var a=l[r];e=Math.max(e,a.x),i=Math.min(i,a.x),n=Math.max(n,a.y),h=Math.min(h,a.y)}return{x:i,y:i,width:e-i,height:n-h}}(h);return[[{x:n.x+i.x,y:n.y+i.x,width:i.width,height:i.height}],[{type:"polygon",x:n.x,y:n.y,points:h.map(function(t){return{x:t.x+n.x,y:t.y+n.y}}),style:r}]]}},t.renderTable=function(e,i,t){return n(t.map(function(t){return h(e,(n=t,i.map(function(t,e){return[t,n[e]]})));var n}))},t.renderText=function(t){return n(t.map(function(t){return i(t)}))},t.renderToPDF=function(t,e,n,i,h,r){var l=new t({layout:"portrait",size:[i.width,i.height]}),a=s(l),o=e.createWriteStream(n);l.pipe(o);var u=void 0;return r&&(u=function(t){return r(t).map(function(t){return t.renderer(a,t.bboxes)[1]})}),f(l,i,h.map(function(t){return t.renderer(a,t.bboxes)[1]}),u),l.end(),o},t.renderToPages=f,t.vertically=n,t.withMargins=function(e,n,i,h,r){return function(t){return{tag:"new_page",x:r,y:t*e.height+n,width:e.width-(r+i),height:e.height-(n+h)}}},t}({});
