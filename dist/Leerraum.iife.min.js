var Leerraum=function(t){"use strict";function L(){this.head=null,this.tail=null,this.listSize=0}(L.Node=function(t){this.prev=null,this.next=null,this.data=t}).prototype.toString=function(){return this.data.toString()},L.prototype.isLinked=function(t){return!(t&&null===t.prev&&null===t.next&&this.tail!==t&&this.head!==t||this.isEmpty())},L.prototype.size=function(){return this.listSize},L.prototype.isEmpty=function(){return 0===this.listSize},L.prototype.first=function(){return this.head},L.prototype.last=function(){return this.last},L.prototype.toString=function(){return this.toArray().toString()},L.prototype.toArray=function(){for(var t=this.head,e=[];null!==t;)e.push(t),t=t.next;return e},L.prototype.forEach=function(t){for(var e=this.head;null!==e;)t(e),e=e.next},L.prototype.contains=function(t){var e=this.head;if(!this.isLinked(t))return!1;for(;null!==e;){if(e===t)return!0;e=e.next}return!1},L.prototype.at=function(t){var e=this.head,i=0;if(t>=this.listLength||t<0)return null;for(;null!==e;){if(t===i)return e;e=e.next,i+=1}return null},L.prototype.insertAfter=function(t,e){return this.isLinked(t)&&(e.prev=t,e.next=t.next,null===t.next?this.tail=e:t.next.prev=e,t.next=e,this.listSize+=1),this},L.prototype.insertBefore=function(t,e){return this.isLinked(t)&&(e.prev=t.prev,null===(e.next=t).prev?this.head=e:t.prev.next=e,t.prev=e,this.listSize+=1),this},L.prototype.push=function(t){return null===this.head?this.unshift(t):this.insertAfter(this.tail,t),this},L.prototype.unshift=function(t){return null===this.head?(this.head=t,(this.tail=t).prev=null,t.next=null,this.listSize+=1):this.insertBefore(this.head,t),this},L.prototype.remove=function(t){return this.isLinked(t)&&(null===t.prev?this.head=t.next:t.prev.next=t.next,null===t.next?this.tail=t.prev:t.next.prev=t.prev,this.listSize-=1),this},L.prototype.pop=function(){var t=this.tail;return this.tail.prev.next=null,this.tail=this.tail.prev,this.listSize-=1,t.prev=null,t.next=null,t},L.prototype.shift=function(){var t=this.head;return this.head.next.prev=null,this.head=this.head.next,this.listSize-=1,t.prev=null,t.next=null,t};var F=function(S,t,e){var A={line:e&&e.demerits&&e.demerits.line||10,flagged:e&&e.demerits&&e.demerits.flagged||100,fitness:e&&e.demerits&&e.demerits.fitness||3e3},M=e&&e.tolerance||2,b=new L,C={width:0,stretch:0,shrink:0},z=t,i=[],n={data:{demerits:1/0}};function E(t,e,i,n,h,r,l){return{position:t,demerits:e,ratio:i,line:n,fitnessClass:h,totals:r||{width:0,stretch:0,shrink:0},previous:l}}function B(t){var e={width:C.width,stretch:C.stretch,shrink:C.shrink},i=0;for(i=t;i<S.length;i+=1)if("glue"===S[i].type)e.width+=S[i].width,e.stretch+=S[i].stretch,e.shrink+=S[i].shrink;else if("box"===S[i].type||"penalty"===S[i].type&&S[i].penalty===-F.infinity&&t<i)break;return e}function h(t,e,i){for(var n,h,r,l,a,o,u,s,f,p,d,y,g=b.first(),c=null,v=0,w=0,x=[],m=0,k=0;null!==g;){for(x=[{demerits:1/0},{demerits:1/0},{demerits:1/0},{demerits:1/0}];null!==g;){if(c=g.next,m=g.data.line+1,g.data.position,o=e,u=g.data,s=m,d=p=f=void 0,f=C.width-u.totals.width,d=p=0,null===(v=null===(y=z(s-1))?null:("penalty"===S[o].type&&(f+=S[o].width),f<y?0<(p=C.stretch-u.totals.stretch)?(y-f)/p:F.infinity:y<f?0<(d=C.shrink-u.totals.shrink)?(y-f)/d:F.infinity:0))){g=null;break}if((v<-1||"penalty"===t.type&&t.penalty===-F.infinity)&&b.remove(g),-1<=v&&v<=M&&(n=100*Math.pow(Math.abs(v),3),w="penalty"===t.type&&0<=t.penalty?Math.pow(A.line+n,2)+Math.pow(t.penalty,2):"penalty"===t.type&&t.penalty!==-F.infinity?Math.pow(A.line+n,2)-Math.pow(t.penalty,2):Math.pow(A.line+n,2),"penalty"===t.type&&"penalty"===i[g.data.position].type&&(w+=A.flagged*t.flagged*i[g.data.position].flagged),k=v<-.5?0:v<=.5?1:v<=1?2:3,1<Math.abs(k-g.data.fitnessClass)&&(w+=A.fitness),(w+=g.data.demerits)<x[k].demerits&&(x[k]={active:g,demerits:w,ratio:v})),null!==(g=c)&&g.data.line>=m)break}for(h=B(e),r=0;r<x.length;r+=1)(l=x[r]).demerits<1/0&&(a=new L.Node(E(e,l.demerits,l.ratio,l.active.data.line+1,r,h,l.active)),null!==g?b.insertBefore(g,a):b.push(a))}}if(b.push(new L.Node(E(0,0,0,0,0,void 0,null))),S.forEach(function(t,e,i){"box"===t.type?C.width+=t.width:"glue"===t.type?(0<e&&"box"===i[e-1].type&&h(t,e,i),C.width+=t.width,C.stretch+=t.stretch,C.shrink+=t.shrink):"penalty"===t.type&&t.penalty!==F.infinity&&h(t,e,i)}),0===b.size())return[];for(b.forEach(function(t){t.data.demerits<n.data.demerits&&(n=t)});null!==n;)i.push({position:n.data.position,ratio:n.data.ratio}),n=n.data.previous;return i.reverse()};function g(e,i){return function(t){return 0==t?e:i(t-1)}}function c(e,i){return function(t){return i(t+e)}}function E(i){return function(e){return function(t){return i(e(t))}}}function B(t,e){return!(t.x+t.width<e.x||t.y+t.height<e.y||e.x+e.width<t.x||e.y+e.height<t.y)}function v(f,p,t,i){var d=[];return t.forEach(function(h,r,l){var t=h.text.split(/\s/),a=f(h.fontFamily,h.fontSize," "),e={width:i&&i.space.width||3,stretch:i&&i.space.stretch||6,shrink:i&&i.space.shrink||9},o=f(h.fontFamily,h.fontSize,"-"),u=a*e.width/e.stretch,s=a*e.width/e.shrink;t.forEach(function(t,e,i){var n=h.hyphenate?p.hyphenate(t):[t];1<n.length&&4<t.length?n.forEach(function(t,e,i){d.push({style:h,value:F.box(f(h.fontFamily,h.fontSize,t),t)}),e!==i.length-1&&d.push({style:h,value:F.penalty(o,100,1)})}):d.push({style:h,value:F.box(f(h.fontFamily,h.fontSize,t),t)}),r===l.length-1&&e===i.length-1?(d.push({style:h,value:F.glue(0,F.infinity,0)}),d.push({style:h,value:F.penalty(0,-F.infinity,1)})):e!==i.length-1&&d.push({style:h,value:F.glue(a,u,s)})})}),d}function w(u,s,t,e){var f=[];return t.forEach(function(h,r,l){var t=h.text.split(/\s/),a=u(h.fontFamily,h.fontSize," "),o=(e&&e.space.width,e&&e.space.stretch,e&&e.space.shrink,u(h.fontFamily,h.fontSize,"-"));t.forEach(function(t,e,i){var n=h.hyphenate?s.hyphenate(t):[t];1<n.length&&4<t.length?n.forEach(function(t,e,i){f.push({style:h,value:F.box(u(h.fontFamily,h.fontSize,t),t)}),e!==i.length-1&&f.push({style:h,value:F.penalty(o,100,1)})}):f.push({style:h,value:F.box(u(h.fontFamily,h.fontSize,t),t)}),r===l.length-1&&e===i.length-1?(f.push({style:h,value:F.glue(0,F.infinity,0)}),f.push({style:h,value:F.penalty(0,-F.infinity,1)})):e!==i.length-1&&(f.push({style:h,value:F.glue(0,12,0)}),f.push({style:h,value:F.penalty(0,0,0)}),f.push({style:h,value:F.glue(a,-12,0)}))})}),f}function x(u,s,t,e){var f=[];return 0<t.length&&(f.push({style:t[0],value:F.box(0,"")}),f.push({style:t[0],value:F.glue(0,12,0)})),t.forEach(function(h,r,l){var t=h.text.split(/\s/),a=u(h.fontFamily,h.fontSize," "),o=(e&&e.space.width,e&&e.space.stretch,e&&e.space.shrink,u(h.fontFamily,h.fontSize,"-"));t.forEach(function(t,e,i){var n=s.hyphenate(t);1<n.length&&4<t.length?n.forEach(function(t,e,i){f.push({style:h,value:F.box(u(h.fontFamily,h.fontSize,t),t)}),e!==i.length-1&&f.push({style:h,value:F.penalty(o,100,1)})}):f.push({style:h,value:F.box(u(h.fontFamily,h.fontSize,t),t)}),r===l.length-1&&e===i.length-1?(f.push({style:h,value:F.glue(0,12,0)}),f.push({style:h,value:F.penalty(0,-F.infinity,0)})):e!==i.length-1&&(f.push({style:h,value:F.glue(0,12,0)}),f.push({style:h,value:F.penalty(0,0,0)}),f.push({style:h,value:F.glue(a,-24,0)}),f.push({style:h,value:F.box(0,"")}),f.push({style:h,value:F.penalty(0,F.infinity,0)}),f.push({style:h,value:F.glue(0,12,0)}))})}),f}F.infinity=1e4,F.glue=function(t,e,i){return{type:"glue",width:t,stretch:e,shrink:i}},F.box=function(t,e){return{type:"box",width:t,value:e}},F.penalty=function(t,e,i){return{type:"penalty",width:t,penalty:e,flagged:i}};function u(z){return function(t,e){for(var i=[],n=[],h=[],r=0,l=z;r<l.length;r++){var a=l[r],o=a[0],u=(0,a[1])(t,E(o)(e)),s=u[0],f=u[1];n=n.concat(s),h=h.concat(f)}for(var p={},d=0,y=n;d<y.length;d++)for(var g=y[d],c=0,v=void 0,w=!1;v=e(c);){if(B(g,v))void 0===p[c]&&(p[c]=[]),p[c].push(g),w=!0;else if(w)break;c++}for(var x,m,k,S,A=0,M=Object.keys(p).sort();A<M.length;A++){var b=p[M[A]],C=b[0];for(c=1;c<b.length;c++)x=C,m=b[c],void 0,k=Math.min(x.x,m.x),S=Math.min(x.y,m.y),C={x:k,y:S,width:Math.max(x.x+x.width,m.x+m.width)-k,height:Math.max(x.y+x.height,m.y+m.height)-S};i.push(C)}return[i,h]}}function i(y){return function(t,e){for(var i=[],n=e,h=[],r=0,l=y;r<l.length;r++){var a=(0,l[r])(t,n),o=a[0],u=a[1];if(0<o.length){for(var s=null,f=o[o.length-1],p=0;null!==(s=n(p))&&!B(s,f);)p++;if(null!=s){var d={x:s.x,y:f.y+f.height,width:s.width,height:s.y+s.height-(f.y+f.height)};n=0<d.height?g(d,c(p+1,n)):c(p+1,n)}}h=h.concat(o),i=i.concat(u)}return[h,i]}}function n(t,n,h){var e;switch(n.align){case"left":default:e=w;break;case"center":e=x;break;case"justify":e=v}for(var i,r,l=e(t.measure,n.hypher,n.spans,null),a=F(l.map(function(t){return t.value}),(i=function(t){var e=(t+1)*n.leading,i=0;return i+=n.leftIndentation?n.leftIndentation(t):0,i+=n.rightIndentation?n.rightIndentation(t):0,h(e,t)-i},r={},function(t){return void 0!==r[t]||(r[t]=i(t)),r[t]}),{tolerance:n.tolerance||10}),o=[],u=0,s=1;s<a.length;s+=1){for(var f=a[s].position,p=a[s].ratio,d=u;d<l.length;d+=1){var y=l[d].value;if("box"===y.type||"penalty"===y.type&&y.penalty===-F.infinity){u=d;break}}o.push({ratio:p,nodes:l.slice(u,f+1),position:f}),u=f}return o}function m(a,o,u,s){void 0===u&&(u=0),void 0===s&&(s=0);var f=[],p=0,d=0;return o.nodes.forEach(function(t,e,i){var n=-a.fontMetrics(t.style.fontFamily).ascender/1e3*t.style.fontSize,h=u+p,r=s+0;if("box"===t.value.type){if(0===h){var l=t.value.value[0]?a.glyphMetrics(t.style.fontFamily,t.value.value[0]).leftBearing:0;d=-l/1e3*t.style.fontSize}f.push({type:"text",x:h+d,y:r+n,span:t.style,text:t.value.value}),p+=t.value.width}else"glue"===t.value.type?p+=t.value.width+o.ratio*(o.ratio<0?t.value.shrink:t.value.stretch):"penalty"===t.value.type&&100===t.value.penalty&&e===i.length-1&&f.push({type:"text",x:h+d,y:r+n,span:t.style,text:"-"})}),f}function e(c){return function(o,r){function u(t,e){for(var i=0,n=0,h=null;null!==(h=r(n));){if(e-i<h.height)return[h,n];i+=Math.floor(h.height/t)*t,n++}return[null,n]}var s,f,p=[],d=0,y=0,g=null,t=[];n(o,c,function(t){var e=u(c.leading,t),i=e[0];e[1];return null!==i?i.width:NaN}).forEach(function(t,e){var i,n,h,r,l=c.leftIndentation?c.leftIndentation(e):0;y+=c.leading,d+=c.leading,i=u(c.leading,d),s=i[0],f=i[1],null===g||(h=g,r=.001,(n=s).x>=h.x-r&&n.x<=h.x+r&&n.y>=h.y-r&&n.y<=h.y+r&&n.width>=h.width-r&&n.width<=h.width+r&&n.height>=h.height-r&&n.height<=h.height+r)||(y=c.leading);var a=m(o,t,(g=s).x+l,s.y+y);p=p.concat(a)});for(var e=0;e<f;e++)t.push(r(e));return null!=s&&t.push({x:s.x,y:s.y,width:s.width,height:Math.min(s.height,y+(c.paragraphLeading||0))}),[t,p]}}function h(t,e){for(var i=[],n=0,h=0,r=e;h<r.length;h++){var l=r[h],a=l[0],o=l[1];i.push([[n,a],o]),n+=a+t}return u(i.map(function(t){var e,i,n,h=t[0],r=t[1];return[(e=h,i=e[0],n=e[1],function(t){return{x:t.x+i,y:t.y,width:n,height:t.height}}),r]}))}function s(n){return{measure:function(t,e,i){return n.font(t)._font.widthOfString(i,e)},fontMetrics:function(t){return{ascender:n.font(t)._font.ascender}},glyphMetrics:function(t,e){return{leftBearing:n.font(t)._font.font.layout(e).glyphs[0]._metrics.leftBearing}}}}function S(t,e){void 0!==e.lineWidth&&t.lineWidth(e.lineWidth),void 0!==e.strokeColor&&t.strokeColor(e.strokeColor),void 0!==e.fillColor&&t.fillColor(e.fillColor),void 0!==e.strokeOpacity&&t.strokeOpacity(e.fillColor),void 0!==e.fillOpacity&&t.fillOpacity(e.fillColor),void 0!==e.lineJoin&&t.lineJoin(e.lineJoin),void 0!==e.lineCap&&t.lineCap(e.lineCap)}function f(t,e,i,n){for(var h=0,r=0,l=i;r<l.length;r++)for(var a=0,o=l[r];a<o.length;a++){var u=o[a],s=Math.floor(u.y/e.height);h=Math.max(h,s)}var f=Array(h+1).fill([]);if(n)for(s=0;s<=h;s++)for(var p=0,d=n(s);p<d.length;p++)for(var y=0,g=d[p];y<g.length;y++){u=g[y];f[s].push(u)}for(var c=0,v=i;c<v.length;c++)for(var w=0,x=v[c];w<x.length;w++){u=x[w];f[s=Math.floor(u.y/e.height)].push(u)}for(s=0;s<=h;s++){0!=s&&t.addPage();for(var m=0,k=f[s];m<k.length;m++){u=k[m];switch(t.save(),u.type){case"text":t.save(),S(t,u.span.style||{}),t.font(u.span.fontFamily).fontSize(u.span.fontSize)._fragment(u.text,u.x,u.y-s*e.height,u.span.options||{}),t.restore();break;case"polygon":t.save(),S(t,u.style||{}),u.style.fillColor&&u.style.strokeColor?(t.polygon.apply(t,u.points.map(function(t){return[t.x,t.y]})),t.fillAndStroke()):u.style.fillColor?(t.polygon.apply(t,u.points.map(function(t){return[t.x,t.y]})),t.fill()):u.style.strokeColor&&(t.polygon.apply(t,u.points.map(function(t){return[t.x,t.y]})),t.stroke()),t.restore()}}}}return t.columnsWithMargins=function(e,i,n,h,r,l){return function(t){return t%2==0?{tag:"new_page",x:l,y:Math.floor(t/2)*e.height+n,width:e.width/2-i/2-l,height:e.height-(n+r)}:{x:i/2+e.width/2,y:Math.floor(t/2)*e.height+n,width:e.width/2-i/2-h,height:e.height-(n+r)}}},t.combine=u,t.formats={"4A0":{width:4767.87,height:6740.79},"2A0":{width:3370.39,height:4767.87},A0:{width:2383.94,height:3370.39},A1:{width:1683.78,height:2383.94},A2:{width:1190.55,height:1683.78},A3:{width:841.89,height:1190.55},A4:{width:595.28,height:841.89},A5:{width:419.53,height:595.28},A6:{width:297.64,height:419.53},A7:{width:209.76,height:297.64},A8:{width:147.4,height:209.76},A9:{width:104.88,height:147.4},A10:{width:73.7,height:104.88},B0:{width:2834.65,height:4008.19},B1:{width:2004.09,height:2834.65},B2:{width:1417.32,height:2004.09},B3:{width:1000.63,height:1417.32},B4:{width:708.66,height:1000.63},B5:{width:498.9,height:708.66},B6:{width:354.33,height:498.9},B7:{width:249.45,height:354.33},B8:{width:175.75,height:249.45},B9:{width:124.72,height:175.75},B10:{width:87.87,height:124.72},C0:{width:2599.37,height:3676.54},C1:{width:1836.85,height:2599.37},C2:{width:1298.27,height:1836.85},C3:{width:918.43,height:1298.27},C4:{width:649.13,height:918.43},C5:{width:459.21,height:649.13},C6:{width:323.15,height:459.21},C7:{width:229.61,height:323.15},C8:{width:161.57,height:229.61},C9:{width:113.39,height:161.57},C10:{width:79.37,height:113.39},RA0:{width:2437.8,height:3458.27},RA1:{width:1729.13,height:2437.8},RA2:{width:1218.9,height:1729.13},RA3:{width:864.57,height:1218.9},RA4:{width:609.45,height:864.57},SRA0:{width:2551.18,height:3628.35},SRA1:{width:1814.17,height:2551.18},SRA2:{width:1275.59,height:1814.17},SRA3:{width:907.09,height:1275.59},SRA4:{width:637.8,height:907.09},EXECUTIVE:{width:521.86,height:756},FOLIO:{width:612,height:936},LEGAL:{width:612,height:1008},LETTER:{width:612,height:792},TABLOID:{width:792,height:1224}},t.idRenderer=function(t,e){return[[],[]]},t.jsPdfDocMeasures=function(h){return{measure:function(t,e,i){var n=String(t).split("\t");return h.setFont(n[0],n[1]).getStringUnitWidth(i)*e},fontMetrics:function(t){return{ascender:0}},glyphMetrics:function(t,e){return{leftBearing:0}}}},t.landscape=function(t){return{width:t.height,height:t.width}},t.nodesLineToTextNodes=m,t.pageBreak=function(t,e){for(var i=0,n=[];"new_page"!==e(i).tag;)n.push(e(i)),i++;return[n,[]]},t.paragraphToNodesLines=n,t.pdfKitDocMeasures=s,t.renderColumns=h,t.renderParagraph=e,t.renderPolygon=function(h,r){return function(t,e){var i=e(0),n=function(t){for(var e=Number.MIN_VALUE,i=Number.MIN_VALUE,n=Number.MAX_VALUE,h=Number.MAX_VALUE,r=0,l=t;r<l.length;r++){var a=l[r];e=Math.max(e,a.x),n=Math.min(n,a.x),i=Math.max(i,a.y),h=Math.min(h,a.y)}return{x:n,y:n,width:e-n,height:i-h}}(h);return[[{x:i.x+n.x,y:i.y+n.x,width:n.width,height:n.height}],[{type:"polygon",x:i.x,y:i.y,points:h.map(function(t){return{x:t.x+i.x,y:t.y+i.y}}),style:r}]]}},t.renderTable=function(e,n,t){return i(t.map(function(t){return h(e,(i=t,n.map(function(t,e){return[t,i[e]]})));var i}))},t.renderText=function(t){return i(t.map(function(t){return e(t)}))},t.renderToPDF=function(t,e,i,n,h,r){var l=new t({layout:"portrait",size:[n.width,n.height]}),a=s(l),o=e.createWriteStream(i);l.pipe(o);var u=void 0;return r&&(u=function(t){return r(t).map(function(t){return t.renderer(a,t.bboxes)[1]})}),f(l,n,h.map(function(t){return t.renderer(a,t.bboxes)[1]}),u),l.end(),o},t.renderToPages=f,t.vertically=i,t.withMargins=function(e,i,n,h,r){return function(t){return{tag:"new_page",x:r,y:t*e.height+i,width:e.width-(r+n),height:e.height-(i+h)}}},t}({});
